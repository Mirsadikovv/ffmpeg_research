# üé¨ Transcoder Framework

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –Ω–∞ Go —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FFmpeg.

**–í–µ—Ä—Å–∏—è 2.0** - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏

üìñ **[–ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ FFmpeg](FFMPEG_REFERENCE.md)** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º FFmpeg

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üé• **–¢—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- üì∫ **HLS —Å—Ç—Ä–∏–º—ã** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ .m3u8 –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- üî¥ **Live —Å—Ç—Ä–∏–º—ã** - –∑–∞–ø–∏—Å—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- üîß **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- üìã **19 –ø—Ä–µ—Å–µ—Ç–æ–≤** –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- üîÑ **–°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π** —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é

### üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v2.0
- üìä **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑** –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- üéõÔ∏è **–°–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤** FFmpeg (–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, —è—Ä–∫–æ—Å—Ç—å, –∑–≤—É–∫)
- üîó **–ö–æ–Ω–≤–µ–π–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üìà **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìù **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å —É—Ä–æ–≤–Ω—è–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- üèóÔ∏è **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** DTO/Utils/Presets

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
go get github.com/your-username/transcoder
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ:

```bash
# Ubuntu/Debian
sudo apt install ffmpeg

# macOS
brew install ffmpeg

# Windows
# –°–∫–∞—á–∞–π—Ç–µ —Å https://ffmpeg.org/download.html
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```go
package main

import (
    "context"
    "log"
    
    transcoder "github.com/Mirsadikovv/ffmpeg_research"
    "github.com/Mirsadikovv/ffmpeg_research/dto"
)

func main() {
    // –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å–∫–æ–¥–µ—Ä —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    tc, err := transcoder.New("ffmpeg")
    if err != nil {
        log.Fatal(err)
    }

    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
    config := dto.Config{
        InputPath:    "input.mp4",
        OutputPath:   "output.mp4",
        VideoCodec:   "libx264",
        AudioCodec:   "aac",
        VideoBitrate: "1000k",
        AudioBitrate: "128k",
    }

    // –°–æ–∑–¥–∞–µ–º –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–¥–∞—á—É
    job := tc.CreateJob(config)
    ctx := context.Background()
    
    if err := tc.Execute(ctx, job); err != nil {
        log.Fatal(err)
    }
    
    log.Println("–¢—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")
}
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
```go
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
progressCallback := func(progress float64, speed string, eta time.Duration) {
    fmt.Printf("\r–ü—Ä–æ–≥—Ä–µ—Å—Å: %.1f%% | –°–∫–æ—Ä–æ—Å—Ç—å: %s | ETA: %v", 
        progress, speed, eta)
}

tracker := transcoder.NewProgressTracker(progressCallback)
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ tracker –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```

## üéõÔ∏è –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v2.0

### –°–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ FFmpeg
```go
// –°–æ–∑–¥–∞–µ–º —Ü–µ–ø–æ—á–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤
filterChain := transcoder.NewFilterChain().
    AddVideoFilter("scale", map[string]string{"w": "1920", "h": "1080"}).
    AddVideoFilter("eq", map[string]string{"brightness": "0.1", "contrast": "1.2"}).
    AddAudioFilter("volume", map[string]string{"volume": "1.2"})

// –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
config := dto.Config{
    InputPath:  "input.mp4",
    OutputPath: "output_filtered.mp4",
    VideoCodec: "libx264",
    AudioCodec: "aac",
}

job := tc.CreateJob(config)
err := tc.ExecuteWithFilters(ctx, job, filterChain)
```

### –ö–æ–Ω–≤–µ–π–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ (Pipelines)
```go
// –°–æ–∑–¥–∞–µ–º –≤–µ–±-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä
pipeline := transcoder.CreateWebOptimizationPipeline(tc)

// –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏
err := pipeline.Execute(ctx, "input.mp4", "output_web.mp4")

// –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–Ω–≤–µ–π–µ—Ä—ã:
// - CreateWebOptimizationPipeline() - –≤–µ–±-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
// - CreateMobilePipeline() - –º–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è  
// - CreateArchivePipeline() - –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
```go
// –ü–æ–ª—É—á–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
mediaInfo, err := tc.GetMediaInfo("video.mp4")
if err == nil {
    fmt.Printf("–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: %s\n", mediaInfo.GetResolution())
    fmt.Printf("–ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤: %.1f fps\n", mediaInfo.GetFrameRate())
    fmt.Printf("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: %.1f —Å–µ–∫\n", mediaInfo.Duration.Seconds())
    fmt.Printf("–ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞: %s\n", mediaInfo.Summary())
    
    // –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–æ–≤
    videoStreams := mediaInfo.GetVideoStreams()
    audioStreams := mediaInfo.GetAudioStreams()
}
```

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```go
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logger := transcoder.NewDefaultLogger(transcoder.LogLevelDebug)
tc.SetLogger(logger)

// –ò–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ production
tc.SetLogger(&transcoder.NoOpLogger{})
```

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–æ–≤ (19 —à—Ç—É–∫!)

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞
```go
// –ü–æ–ª—É—á–∞–µ–º –ø—Ä–µ—Å–µ—Ç –∏–∑ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
preset, exists := presets.GetPreset("web-hd")
if !exists {
    log.Fatal("–ü—Ä–µ—Å–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω")
}

// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—É—Ç–∏
config := preset.Config
config.InputPath = "input.mp4"
config.OutputPath = "output_hd.mp4"

// –í—ã–ø–æ–ª–Ω—è–µ–º —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
job := tc.CreateJob(config)
tc.Execute(ctx, job)
```

### –ü—Ä–µ—Å–µ—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
```go
// –ü–æ–ª—É—á–∞–µ–º –ø—Ä–µ—Å–µ—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
categories := presets.GetPresetsByCategory()

for category, categoryPresets := range categories {
    fmt.Printf("%s:\n", category)
    for _, preset := range categoryPresets {
        fmt.Printf("  - %s: %s\n", preset.Name, preset.Description)
    }
}
```

## –†–∞–±–æ—Ç–∞ —Å –æ—á–µ—Ä–µ–¥—å—é

```go
// –°–æ–∑–¥–∞–µ–º –æ—á–µ—Ä–µ–¥—å —Å 2 –≤–æ—Ä–∫–µ—Ä–∞–º–∏
queue := transcoder.NewQueue(tc, 2)
queue.Start()

// –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á–∏
for i := 0; i < 5; i++ {
    config := transcoder.Config{
        InputPath:  fmt.Sprintf("input%d.mp4", i),
        OutputPath: fmt.Sprintf("output%d.mp4", i),
        VideoCodec: "libx264",
        AudioCodec: "aac",
    }
    job := tc.CreateJob(config)
    queue.AddJob(job)
}

// –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—á–µ—Ä–µ–¥—å
defer queue.Stop()
```

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã

### –í–µ–± –∏ –º–æ–±–∏–ª—å–Ω—ã–µ
- `web-hd` - HD –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –≤–µ–± (1280x720, H.264)
- `web-sd` - SD –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –≤–µ–± (854x480, H.264)
- `mobile` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- `4k` - 4K –∫–∞—á–µ—Å—Ç–≤–æ (3840x2160, H.264)
- `archive` - –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è (H.265, FLAC)

### –°—Ç—Ä–∏–º–∏–Ω–≥
- `twitch` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Twitch —Å—Ç—Ä–∏–º–∞ (1080p60)
- `youtube` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è YouTube (1080p30)

### –ê—É–¥–∏–æ
- `audio-mp3` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ MP3
- `audio-aac` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ AAC

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ë—ã—Å—Ç—Ä–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
```go
// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
tc.ConvertToFormat("input.mp4", "output.webm", "webm")
tc.ConvertToFormat("video.mov", "audio.mp3", "mp3")
```

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ
```go
// –ò–∑–≤–ª–µ—á—å –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫—É –∏–∑ –≤–∏–¥–µ–æ
tc.ExtractAudio("video.mp4", "audio.mp3")
```

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä
```go
// –°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–∞—Ç—é—Ä—É –Ω–∞ 10-–π —Å–µ–∫—É–Ω–¥–µ
tc.CreateThumbnail("video.mp4", "thumb.jpg", "00:00:10")
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
```go
// –£–∑–Ω–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–∞
duration, err := tc.GetDuration("video.mp4")
```

## –†–∞–±–æ—Ç–∞ —Å HLS —Å—Ç—Ä–∏–º–∞–º–∏

### –ó–∞–≥—Ä—É–∑–∫–∞ HLS –ø–ª–µ–π–ª–∏—Å—Ç–∞
```go
// –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ HLS —Å—Ç—Ä–∏–º–∞
ctx := context.Background()
err := tc.DownloadHLS(ctx, "https://example.com/playlist.m3u8", "stream.mp4")
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HLS
```go
config := transcoder.HLSConfig{
    URL:        "https://example.com/playlist.m3u8",
    OutputPath: "stream_hd.mp4",
    Quality:    "1920x1080", // –∏–ª–∏ "best", "worst"
    Duration:   30 * time.Minute, // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    Headers: map[string]string{
        "Referer":    "https://example.com",
        "User-Agent": "Custom User Agent",
    },
    RetryAttempts:  3,
    SegmentTimeout: 10 * time.Second,
}

err := tc.DownloadHLSWithConfig(ctx, config)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–µ–π–ª–∏—Å—Ç–µ
```go
info, err := tc.GetHLSInfo("https://example.com/playlist.m3u8")
if err == nil {
    fmt.Printf("–ù–∞–π–¥–µ–Ω–æ %d –ø–æ—Ç–æ–∫–æ–≤\n", len(info.Streams))
    fmt.Printf("Live —Å—Ç—Ä–∏–º: %v\n", info.IsLive)
    
    for _, stream := range info.Streams {
        fmt.Printf("–ü–æ—Ç–æ–∫: %s, %d kbps\n", stream.Resolution, stream.Bandwidth/1000)
    }
}
```

### –ó–∞–ø–∏—Å—å live —Å—Ç—Ä–∏–º–∞
```go
// –ó–∞–ø–∏—Å–∞—Ç—å live —Å—Ç—Ä–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 10 –º–∏–Ω—É—Ç
duration := 10 * time.Minute
err := tc.RecordLiveStream(ctx, "https://example.com/live.m3u8", "live_record.mp4", duration)
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è HLS –≤ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç
```go
// –ó–∞–≥—Ä—É–∑–∏—Ç—å HLS –∏ —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ WebM
err := tc.ConvertHLSToFormat(ctx, "https://example.com/playlist.m3u8", "stream.webm", "webm")
```

## API Reference

### Transcoder

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- `New(ffmpegPath string) (*Transcoder, error)` - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ç—Ä–∞–Ω—Å–∫–æ–¥–µ—Ä
- `CreateJob(config Config) *Job` - —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- `Execute(ctx context.Context, job *Job) error` - –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `GetInfo(filePath string) (map[string]interface{}, error)` - –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ

#### –£–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- `ConvertToFormat(inputPath, outputPath, format string) error` - –±—ã—Å—Ç—Ä–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- `ExtractAudio(inputPath, outputPath string) error` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ
- `CreateThumbnail(inputPath, outputPath, timeOffset string) error` - —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä—ã
- `GetDuration(filePath string) (string, error)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Queue

- `NewQueue(transcoder *Transcoder, workers int) *Queue` - —Å–æ–∑–¥–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å
- `AddJob(job *Job)` - –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å
- `Start()` - –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—á–µ—Ä–µ–¥–∏
- `Stop()` - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Makefile –∫–æ–º–∞–Ω–¥—ã
```bash
make help          # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make check-ffmpeg  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ FFmpeg
make example       # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä
make test          # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
make test-coverage # –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
make bench         # –ë–µ–Ω—á–º–∞—Ä–∫–∏
make fmt           # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
make check         # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
go test -v ./...

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
go test -v -coverprofile=coverage.out ./...
go tool cover -html=coverage.out

# –ë–µ–Ω—á–º–∞—Ä–∫–∏
go test -bench=. -benchmem ./...
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
transcoder/
‚îú‚îÄ‚îÄ transcoder.go      # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ presets.go         # –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ queue.go           # –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π
‚îú‚îÄ‚îÄ transcoder_test.go # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ example/
‚îÇ   ‚îî‚îÄ‚îÄ main.go        # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ FFMPEG_REFERENCE.md # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ FFmpeg
‚îú‚îÄ‚îÄ Makefile           # –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License